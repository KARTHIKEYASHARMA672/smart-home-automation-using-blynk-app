// -------------------- Blynk Home Automation --------------------
// Fill in your Blynk template and authentication details
#define BLYNK_TEMPLATE_ID "YourTemplateID"       // From Blynk Web Dashboard
#define BLYNK_DEVICE_NAME "HomeAutomation"       // Your Device Name
#define BLYNK_AUTH_TOKEN  "YourAuthToken"        // From Blynk Web/App

// Include required libraries
#include <ESP8266WiFi.h>
#include <BlynkSimpleEsp8266.h>

// ------------- Wi-Fi credentials -------------
char ssid[] = "YourWiFiSSID";       // Your Wi-Fi Name
char pass[] = "YourWiFiPassword";   // Your Wi-Fi Password

// ------------- Relay Pin Configuration -------------
#define RELAY1 D1
#define RELAY2 D2
#define RELAY3 D3
#define RELAY4 D4

// -------------------- Setup Function --------------------
void setup() {
  // Initialize Serial Monitor
  Serial.begin(9600);
  Serial.println("Blynk Home Automation Starting...");

  // Set relay pins as OUTPUT
  pinMode(RELAY1, OUTPUT);
  pinMode(RELAY2, OUTPUT);
  pinMode(RELAY3, OUTPUT);
  pinMode(RELAY4, OUTPUT);

  // Turn all relays OFF initially (HIGH for active low relays)
  digitalWrite(RELAY1, HIGH);
  digitalWrite(RELAY2, HIGH);
  digitalWrite(RELAY3, HIGH);
  digitalWrite(RELAY4, HIGH);

  // Start Blynk connection
  Blynk.begin(BLYNK_AUTH_TOKEN, ssid, pass);
}

// -------------------- Relay Control from Blynk --------------------
// Virtual Pin V0 controls Relay 1
BLYNK_WRITE(V0) {
  digitalWrite(RELAY1, param.asInt() ? LOW : HIGH);
}
// Virtual Pin V1 controls Relay 2
BLYNK_WRITE(V1) {
  digitalWrite(RELAY2, param.asInt() ? LOW : HIGH);
}
// Virtual Pin V2 controls Relay 3
BLYNK_WRITE(V2) {
  digitalWrite(RELAY3, param.asInt() ? LOW : HIGH);
}
// Virtual Pin V3 controls Relay 4
BLYNK_WRITE(V3) {
  digitalWrite(RELAY4, param.asInt() ? LOW : HIGH);
}

// -------------------- Main Loop --------------------
void loop() {
  Blynk.run();
}
